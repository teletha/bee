jdk:
  - openjdk23

before_install: |
  sdk install maven 3.9.9

install: |
  if [ -e "bee" ]; then
    source bee install maven
  else
    BeeVersion=$(curl -SsL https://git.io/stable-bee)
    curl -SsL -o bee-${BeeVersion}.jar https://jitpack.io/com/github/teletha/bee/${BeeVersion}/bee-${BeeVersion}.jar
    java -javaagent:bee-${BeeVersion}.jar -cp bee-${BeeVersion}.jar bee.Bee install maven
  fi

  # Until the end of 2024, Jitpack would recognize it as an Artifact if I put the appropriate Jar files, etc. in the right place.
  # However, since 2025, Jitpack no longer recognizes them, so I have to re-install them using Maven's install-file command
  # to make Jitpack recognize them.
  #
  # Reading the VERSION environment variable alone is not enough to support builds with SNAPSHOT and commit IDs,
  # so the necessary information is obtained from version.txt.
  ProductVersion=$(cat version.txt | xargs)
  mvn install:install-file -Dfile=target/${ARTIFACT}-${ProductVersion}.jar -DpomFile=pom.xml -DgroupId=${GROUP} -DartifactId=${ARTIFACT} -Dversion=${VERSION} -Dpackaging=jar